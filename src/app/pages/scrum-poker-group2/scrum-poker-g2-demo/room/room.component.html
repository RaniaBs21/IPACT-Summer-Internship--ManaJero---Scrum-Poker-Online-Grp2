
<body>
<div class="container">

<!-----------------------------------  header ------------------------------->
  <div class="topnav">
    <div class="session-info">
      <span class="session-name">{{ session?.name }}</span>
    </div>

    <button class="custom-button" (click)="toggleSidebar()">
      <img src="assets/images/menu.png" style="width: 45px; height: 40px"  class="button-icon" alt="desc">
    </button>
    <button class="custom-button" (click)="openInvitePlayers()">
      <img src="assets/images/invitation.png" style="width: 45px; height: 45px"  class="button-icon" alt="desc">
      Invite players
    </button>
  </div>

<!------------------------------  pick your card --------------------------------->
  <div class="button-container">
    <div class="button-wrapper">
      <br>
      <h1 *ngIf="!revealedCard && selectedCard === null">
        <span>P</span><span>I</span><span>C</span><span>K</span><span> </span><span>Y</span><span>O</span><span>U</span><span>R</span><span> </span><span>C</span><span>A</span><span>R</span><span>D</span><span>S</span><span>!</span>
      </h1>
      <button *ngIf="selectedCard !== null && !revealedCard" (click)="revealCard()" class="neon-shadow">
        Reveal card
      </button>
      <br>
      <button *ngIf="revealedCard" (click)="revealCard()" class="reveal-button" routerLink="createGame">
        start new voting
      </button>
    </div>
    <div class="container">
      <h1 *ngIf="revealedCard">
        <span>Your selected card: {{ revealedCard }}</span>
      </h1>

      <div class="average-agreement" *ngIf="revealedCard">
        <div class="average">
          <h5 style="color: #3A3A3A">Average:</h5>
          <h3>{{ selectedCard }}</h3>
        </div>
        <div class="vote">
          <h5 style="color: #3A3A3A">Vote:</h5>
          <h3>{{ selectedCard }}</h3>
        </div>
      </div>

    </div>
  </div>
 <!-- <div class="cards" *ngIf="!revealedCard">
    <button *ngFor="let card of cards"
            [ngClass]="{'selected': selectedCard === card}"
            (click)="selectCard(card)"
            class="card-button">
      {{ card }}
    </button>


  </div>-->

<!----------------------------------  algo cards --------------------------------->
  <div class="cards">
    <div class="group relative h-40 cursor-pointer" *ngFor="let card of cards" [id]="'vote_card_' + card" (click)="selectCard(card)" [style.opacity]="selectedCard === card ? '1' : '0.5'" [ngClass]="{'selected': selectedCard === card}">
      <button class="card-button">{{ card }}</button>
    </div>
  </div>
</div>

<!------------------------------------------ Sidebar : issues --------------------------------->
<div class="sidebar" [class.open]="isSidebarOpen">
  <div class="sidebar-header">
    <h2>Issues</h2>
  </div>
  <div class="sidebar-content">
    <div class="header-container">

      <h5>issues</h5>
      <div class="dropdown-container">
        <img src="assets/images/import.png" style="width: 50px; height: 50px" class="spaced-img" (click)="toggleDropdown()"
             style="cursor:pointer;" alt="desc">
        <ul *ngIf="isDropdownOpen" class="dropdown-content">
          <li (click)="selectOption('jira')">Import from JIRA</li>
          <li (click)="selectOption('linear')">Import from Linear</li>
          <li (click)="selectOption('urls')">Add from URLs</li>
          <li (click)="selectOption('csv')">Import from CSV</li>
        </ul>
      </div>
      <img src="assets/images/close.png" style="width: 50px; height: 50px" (click)="toggleSidebar()" class="close-button" alt="desc">
    </div>
    <button class="btn btn-light" *ngIf="!showForm" (click)="toggleForm()">
      <img src="assets/images/addUserStory.png" style="width: 45px; height: 45px" alt="desc">
      Add An issues
    </button>
    <div *ngIf="showForm" class="issue-form">
      <nb-card-body>
        <form>
          <div class="form-group">
                        <textarea rows="5" nbInput fullWidth shape="round" [(ngModel)]="issueTitle"
                                  placeholder="Enter a title for the issue"></textarea>
          </div>

          <div class="button-group">
            <button (click)="saveIssue()" class="btn btn-primary">Save</button>
            <button (click)="cancel()" class="btn btn-light">Cancel</button>
          </div>
        </form>
      </nb-card-body>
    </div>
  </div>
</div>

<!------------------------------------ Overlay ------------------------------------>
<div class="overlay" [class.show]="isSidebarOpen" (click)="toggleSidebar()"></div>
</body>

<!----------------------------------- Close buton ------------------------------------>
<button class="close-button" style="background-color: orange" routerLink="result">
  <i class="fas fa-times"></i>
  Close Session
</button>

